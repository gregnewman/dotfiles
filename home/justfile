@_default:
    just --list

# cleanup homebrew
@cleanup:
	brew cleanup --prune=0

# Update homebrew
@homebrew-update:
    brew update

# upgrade homebrew then run cleanup
@homebrew-upgrade:
    brew outdated
    brew upgrade || true
    just cleanup

# Auto-commit and push org files on change
watch-org:
    #!/bin/bash
    cd /users/Greg/Org
    /opt/homebrew/bin/fswatch -0 --recursive \
        --exclude '\.git/' \
        --exclude '\.swp$' \
        --exclude '~$' \
        . | while read -d "" event; do
        git add -A
        if ! git diff-index --quiet HEAD 2>/dev/null; then
            git commit -m "Auto-commit: $(date '+%Y-%m-%d %H:%M:%S')"
            git push origin main
        fi
    done
